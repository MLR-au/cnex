<!-- the cog which hides / shows the controls panel -->
<div class="above" style="top: {{cls.top}}px; left: {{cls.left}}px; width: {{cls.width}}px; height: 50px; z-index: 2000000;">
    <div class="row">
        <div class="col-sm-1 col-sm-offset-11 col-md-1 col-md-offset-11 col-lg-1 col-lg-offset-11">
            <span class="glyphicon glyphicon-cog" ng-click="visible = !visible"></span>
        </div>
    </div>
</div>

<!-- the white, semi opaque div behind the controls panel -->
<div class="below" style="top: {{cls.top}}px; left: {{cls.left}}px; width: {{cls.width}}px; height: {{cls.height}}px;" ng-hide="visible">
</div>

<!-- the controls panel -->
<div class="above" style="top: {{cls.top}}px; left: {{cls.left}}px; width: {{cls.width}}px; height: {{cls.height}}px; overflow-y: auto; padding: 15px;" ng-hide="visible">
    <!-- header -->
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <h3>{{site}}</h3>
            <h4><a href="{{data.url}}" target="_blank">{{data.name}}</a></h4>
            <hr/>
        </div>
    </div>

    <!-- dataset stats -->
    <div class="row" ng-show="!contextNodeData">
        <div class="col-sm-8 col-md-8 col-lg-8">
            Total number of nodes
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4">
            {{data.nodes.length}}
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
             Total number of Associative relationships
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4">
             {{data.links.length}}
        </div>
        <div class="col-sm-8 col-md-8 col-lg-8">
             Dataset % nodes unconnected (not shown)
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4">
             {{data.percentUnConnected | number:0}}
        </div>
        <!--
        <div class="col-sm-8 col-md-8 col-lg-8">
             Average network degree
        </div>
        <div class="col-sm-4 col-md-4 col-lg-4">
             {{data.degree | number:1}}
        </div>
        -->
    </div>

    <!-- control buttons -->
    <div class="row" ng-show="!contextNodeData">
        <hr/>
        <div class="col-sm-12 col-md-12 col-lg-12">
            <button class="btn btn-sm btn-default" ng-click="sizeNodesEvenly()">Size nodes evenly</button>
            <button class="btn btn-sm btn-default" ng-click="reset()">Reset</button>
        </div>
    </div>

    <!-- dataset type statistics -->
    <div class="row" ng-show="!contextNodeData">
        <hr/>
        <span ng-repeat="(type, typeData) in data.types">
            <div class="col-sm-6 col-md-6 col-lg-6">
                {{type}}
            </div>
            <div class="col-sm-4 col-md-4 col-lg-4">
                {{typeData.count}}
            </div>
            <div class="col-sm-2 col-md-2 col-lg-2 text-center" style="background-color: {{data.colors[type]}}">
                <span class="form-inline">
                    <span class="checkbox">
                        <input type="checkbox" ng-click="highlightByType(type)" ng-checked="typeData.checked">
                    </span>
                </span>
            </div>
        </span>
    </div>

    <!-- ############################################## -->
    <div class="row" ng-show="contextNodeData">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <span ng-if="contextNodeData.id">
                <strong>{{contextNodeData.type}}:</strong> 
                <a href="{{contextNodeData.id}}" target="_blank">({{contextNodeData.nodeid}}) {{contextNodeData.name}}</a>
            </span>
            <span ng-if="!contextNodeData.id">
                <strong>Function:</strong> 
                {{contextNodeData.name}}
            </span>
        </div>
    </div>
    <div class="row" ng-show="contextNodeData">
        <hr/>
        <div class="col-sm-12 col-md-12 col-lg-12">
            <button class="btn btn-sm btn-default" ng-click="sizeNodesEvenly()">Size nodes evenly</button>
            <button class="btn btn-sm btn-default" ng-click="reset()">Reset</button><br/>
        </div>
    </div>
    <hr/>
    <div class="row" ng-show="contextNodeData">
        <div class="col-sm-12 col-md-12 col-lg-12" ng-repeat="(type, data) in contextNetworkData">
            <span class="form-inline">
                <span class="checkbox"><input type="checkbox" ng-click="selectAll(type)"></span>
                <strong>{{type}} ({{data.length}})</strong><br/>
            </span>
            <span ng-repeat="d in data">
                <span class="form-inline">
                    <span class="checkbox"><input type="checkbox" ng-click="highlight(d.nodeid)" ng-checked="d.checked"></span>
                    <a href="{{d.id}}" target="_blank">({{d.nodeid}}) {{d.name}}</a><br/>
                </span>
            </span>
        </div>
    </div>
</div>
